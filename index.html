<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Kubernetes</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/myplanet.css">
	<link rel="stylesheet" href="css/presentation.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<link rel="icon" href="lib/myplanet/logo/radiant-orange/mark-knockout.svg" />

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal pattern--orange-river">
		<div class="slides">
			<section class="intro" id="intro">
				<div class="logo-wrapper">
					<div class="logo logokube"><span class="visually-hidden"></span></div>
					<div class="logo"><span class="visually-hidden"></span></div>
				</div>
				<aside class="notes">
					Ol√° pessoal, vamos come√ßar. Antes de mais nada queria explicar como v√£o ser as talks de hoje.

					Esta primeira talk ser√° mais uma introdu√ß√£o para a segunda talk onde veremos algo bem bacana implementado usando
					golang para atender uma tend√™ncia de mercado que √© o service-mech. E claro, usando kubernetes que √© outra
					tend√™ncia.
				</aside>
			</section>
			<section class="title" id="title">
				<div class="grid-wrapper">
					<div class="header">
						<!-- Remove logo--full class to only show brand mark -->
						<div class="logo logo--full"><span class="visually-hidden">Kubernetes</span></div>
					</div>
					<div class="content">
						<h1>Kubernetes</h1>
						<div class="description">
							<ol>
								<li class="fragment">O que √© Kubernetes?
									<ul>
										<li class="fragment">Virtualization/Containers</li>
										<li class="fragment">Kubernetes Objects</li>
									</ul>
								</li>
								<li class="fragment">Por que Kubernetes?</li>
							</ol>
						</div>
					</div>
					<div class="credit">
						<hr />
						<div class="label">Apresentado por</div>
						<div class="role"><img width="178" height="238" data-src="lib/myplanet/img/giphy.gif" /></div>
						<div class="name">Alan Voiski</div>
						<div class="role">Cloud Engineering</div>
					</div>
				</div>
				<aside class="notes">
					Meu nome √© Alan Voiski, eu sou um Freelancer contratado pela Fanatics e eu desempenho o papel de engenheiro das
					nuvens, ou Cloud Engineer. Nesta primeira conversas vamos falar sobre kubernetes por√©m sem entrar em detalhes
					muito afundo em todo seu universo que √© bem extenso. O intuito aqui ser√° mais apresentar sua defini√ß√£o e alguns
					aspectos.


				</aside>
			</section>

			<section class="quote color--midnight present" id="quote--midnight" style="display: block;">
				<div class="grid-wrapper">
					<div class="logo"></div>
					<blockquote>
						<p>
							O que √© kubernetes?
						</p>
						<hr class="fragment" data-fragment-index="1">
						<cite class="fragment" data-fragment-index="1">Kubernetes √© um sistema para orquestra√ß√£o de aplica√ß√µes
							contenerizadas.</cite>
					</blockquote>
				</div>
				<aside class="notes">
					Entao o que √© kubernetes? Quem aqui j√° usou isso levanta a m√£o? Quem aqui nunca usou levanta a m√£o?

					Kubernetes √© um sistema para orquestra√ß√£o de aplica√ß√µes contenerizadas.
					Aplica√ß√µes contenerizadas? O que √© isso?
					Se o Kubernetes estiver relacionado a aplica√ß√µes em cont√™ineres, precisamos entender primeiro os fundamentos dos
					cont√™ineres e qual √© o problema que essa tecnologia est√° tentando resolver.

					Para exemplificar quais cont√™ineres estou propondo, vamos dar uma olhada mais de perto no que forma uma aplica√ß√£o
					moderna nos dias de hoje.
				</aside>
			</section>


			<section class="quote color--dark" id="basic-app">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Aplica√ß√£o b√°sica rodando em um bare metal</div>
					</div>
					<div class="content">
						<div id="vm-app-layers">
							<div style="background-color: #e53935; ; margin-left: 8%; margin-right: 8%;" class="app-layer fragment"
							 data-fragment-index="8">Application Config</div>
							<div style="background-color: #c62828; margin-left: 7%; margin-right: 7%;" class="app-layer fragment"
							 data-fragment-index="7">Application</div>
							<div style="background-color: #303f9f; margin-left: 6%; margin-right: 6%;" class="app-layer fragment"
							 data-fragment-index="6">Language Runtime</div>
							<div style="background-color: #00897b; margin-left: 5%; margin-right: 5%;" class="app-layer fragment"
							 data-fragment-index="5">Shared Libraries</div>
							<div style="background-color: #78909c; margin-left: 4%; margin-right: 4%;" class="app-layer fragment"
							 data-fragment-index="4">File System</div>
							<div style="background-color: #78909c; margin-left: 3%; margin-right: 3%;" class="app-layer fragment"
							 data-fragment-index="3">Os/Os Kernel</div>
							<div style="background-color: #455a64; margin-left: 2%; margin-right: 2%;" class="app-layer fragment"
							 data-fragment-index="2">Hardware Drivers</div>
							<div style="background-color: #37474f; margin-left: 1%; margin-right: 1%;" class="app-layer fragment"
							 data-fragment-index="1">Hardware</div>
						</div>
					</div>
					<div class="content">
						<div class="fragment">
							<img data-src="lib/myplanet/img/worksonmachine_certificate.jpg" />
						</div>
					</div>
				</div>
				<aside class="notes">
					Uma aplica√ß√£o b√°sica rodando isolada em um computador seria mais ou menos assim:
					[leia os n√≠veis]
					Language runtime como uma jvm, um ruby, dotnet core, etc

					Ent√£o imagine como voc√™ faz o deploy, atualiza√ß√£o, rollback?
					Nem sempre o que voc√™ colocar aqui vai ser o que voc√™ testou ou esperava. Tem sempre o risco de "Na minha m√°quina
					funciona"
					E como resolver isso, ou diminuir pelo menos?
				</aside>
			</section>

			<section class="quote color--midnight present" id="Immutability" style="display: block;">
				<div class="grid-wrapper">
					<div class="logo"></div>
					<blockquote>
						<p>
							Imutabilidade
						</p>
						<hr class="fragment" data-fragment-index="1">
						<ol>
							<li class="fragment">Previsibilidade
								<ul>
									<li class="fragment">N√£o h√° desvio de configura√ß√£o</li>
									<li class="fragment">Ambientes est√°veis e de f√°cil escalonamento horizontal</li>
								</ul>
							</li>
							<li class="fragment">Processo simples de rollback e recupera√ß√£o</li>
						</ol>
					</blockquote>
				</div>
				<aside class="notes">
					Imutabilidade... que seria ter previsibilidade do ambiente.
					As configura√ß√µes v√£o ser as mesmas que voc√™ desenvolveu e testou.
					Ser√£o ambientes mais est√°veis e que poder√£o ser duplicados de forma mais simples e r√°pida.
					E se precisar, o rollback ser√° um processo simples ou mesmo caso haja perda total e seja necess√°rio recriar a
					m√°quina, debugar, etc.
				</aside>
			</section>

			<section class="subsection" data-background-image="lib/myplanet/img/cloud-vms.jpeg" data-background-size="cover">
				<div class="grid-wrapper">
					<h1 style="color: #FFF">Virtualiza√ß√£o</h1>
					<aside class="notes">
						O que est√° permitindo esse isolamento √© o que chamamos hoje de m√°quinas virtuais ou VMs. Essa
						√© a tecnologia que tornou voc√™ capaz de executar um pequeno aplicativo no mesmo hardware que o Netflix e outras
						grandes empresas usam.
						Embora voc√™ possa fazer aqui uma configura√ß√£o manual e ter os mesmos problemas de work in my machine,
						voc√™ agora pode criar uma imagem de uma vm rodando e reus√°-la em outros ambientes, duplicar ela, promover para
						produ√ß√£o, etc.
						E com outro ganho, voc√™ pode aproveitar melhor os recursos da m√°quina que muitas vezes fica ociosa. Mas mantendo
						o isolamento preservando assim um ambiente est√°vel para sua aplica√ß√£o.
					</aside>
				</div>
			</section>


			<section class="quote color--dark" id="virtualized-app-1">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Aplica√ß√£o b√°sica rodando em uma virtual machine</div>
					</div>
					<div class="content">
						<div id="vm-app-layers">
							<div style="background-color: #e53935; margin-left: 15%; margin-right: 15%;" class="app-layer fragment"
							 data-fragment-index="4">Application Config</div>
							<div style="background-color: #c62828; ; margin-left: 13%; margin-right: 14%;" class="app-layer fragment"
							 data-fragment-index="4">Application</div>
							<div style="background-color: #283593; ; margin-left: 12%; margin-right: 12%;" class="app-layer fragment"
							 data-fragment-index="4">Language Runtime</div>
							<div style="background-color: #303f9f; margin-left: 11%; margin-right: 11%;" class="app-layer fragment"
							 data-fragment-index="4">Shared Libraries</div>
							<div style="background-color: #303f9f; margin-left: 10%; margin-right: 10%;" class="app-layer fragment"
							 data-fragment-index="4">User Processess</div>
							<div style="background-color: #00897b; margin-left: 9%; margin-right: 9%;" class="app-layer fragment"
							 data-fragment-index="4">Os Kernel</div>
							<div style="background-color: #78909c; margin-left: 4%; margin-right: 4%;" class="app-layer fragment"
							 data-fragment-index="2">Virtual Drivers</div>
							<div style="background-color: #78909c; margin-left: 3%; margin-right: 3%;" class="app-layer fragment"
							 data-fragment-index="2">Hypervisor</div>
							<div style="background-color: #455a64; margin-left: 2%; margin-right: 2%;" class="app-layer fragment"
							 data-fragment-index="1">Hardware Drivers</div>
							<div style="background-color: #37474f; margin-left: 1%; margin-right: 1%;" class="app-layer fragment"
							 data-fragment-index="1">Hardware</div>
						</div>
					</div>
				</div>
				<aside class="notes">
					Ent√£o vamos ver como fica sua aplica√ß√£o.
					~Hypervisor~ Aqui entra ent√£o esta camada que faz a astra√ß√£o do hardware virtualizando seu ambiente.
					[~User Processess se pergutarem~ O OS gerencia alguns proccessos que s√£o tidos como cr√≠ticos para o seu
					funcionamento sendo chamados de system proccess e ser√£o executados no iniciar da m√°quina. Todo o resto ser√° user
					processess e neste caso como vc virtualiza em cima de outra camada, sua defini√ß√£o √© esta que inclusive n√£o s√£o
					cr√≠ticas para a m√°quina em si.]
				</aside>
			</section>

			<section class="quote color--dark" id="containerized-app">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Aplica√ß√£o Contenerizada</div>
					</div>
					<div class="content">
						<div class="content">
							<div id="vm-app-layers">
								<div style="background-color: #2e7d32; margin-left: 40%; margin-right: 40%;" class="app-layer fragment"
								 data-fragment-index="3">Application Config</div>
								<div style="background-color: #2e7d32; margin-left: 40%; margin-right: 40%;" class="app-layer fragment"
								 data-fragment-index="3">Application</div>
								<div style="background-color: #2e7d32; margin-left: 40%; margin-right: 40%;" class="app-layer fragment"
								 data-fragment-index="3">Language Runtime</div>
								<div style="background-color: #2e7d32; margin-left: 40%; margin-right: 40%;" class="app-layer fragment"
								 data-fragment-index="3">Shared Libraries</div>
								<div style="background-color: #2e7d32; margin-left: 40%; margin-right: 40%;" class="app-layer fragment"
								 data-fragment-index="3">File System</div>
								<div style="background-color: #bf360c; margin-left: 11%; margin-right: 11%;" class="app-layer fragment"
								 data-fragment-index="2">Container runtime</div>
								<div style="background-color: #bf360c; margin-left: 9%; margin-right: 9%;" class="app-layer fragment"
								 data-fragment-index="2">Os Kernel</div>
								<div style="background-color: #78909c; margin-left: 4%; margin-right: 4%;" class="app-layer fragment"
								 data-fragment-index="1">Virtual Drivers</div>
								<div style="background-color: #78909c; margin-left: 3%; margin-right: 3%;" class="app-layer fragment"
								 data-fragment-index="1">Hypervisor</div>
								<div style="background-color: #455a64; margin-left: 2%; margin-right: 2%;" class="app-layer fragment"
								 data-fragment-index="1">Hardware Drivers</div>
								<div style="background-color: #37474f; margin-left: 1%; margin-right: 1%;" class="app-layer fragment"
								 data-fragment-index="1">Hardware</div>
							</div>
						</div>
						<aside class="notes">
							E os containers?
							Eles nos d√£o a sensa√ß√£o de virtualiza√ß√£o mas eles est√£o aqui mais para apresentar um isolamento.

							Os cont√™ineres e a tecnologia que o cont√™iner constr√≥i permitem que as pessoas utilizem um
							programa que desejam executar no computador de destino
							- que pode ser instalado em um laptop
							- que pode ser executado em um ambiente de teste
							- ou em um ambiente produ√ß√£o
							Todos com muito poucas mudan√ßas e com um alto grau de previsibilidade.

							Eles s√£o assim mais f√°ceis de compartilhar e mais confi√°veis devido sua imutabilidade.
						</aside>
					</div>
				</div>
			</section>

			<section class="quote color--dark" id="containerized-demystification">
				<section class="quote color--dark" id="containerized-demystification-intro">
					<div class="grid-wrapper">
						<div class="header">
							<div class="logo"></div>
							<div class="section">O que √© um container?</div>
						</div>
						<ol>
							<li class="fragment">N√£o √© uma virtual machine</li>
							<li class="fragment">Usa Implementa√ß√µes do kernel Linux
								<ul>
									<li class="fragment">Linux Namespaces (2002)<ul>
											<li>Isolamento processos(PID), network, usu√°rio, etc.</li>
										</ul>
									</li>
									<li class="fragment">Control Groups (2007)<ul>
											<li>Limita recursos de CPU, mem√≥ria, I/O, network, etc.</li>
										</ul>
									</li>
								</ul>
							</li>
							<li class="fragment">Implementa√ß√µes mais usadas:<ul>
									<li>LXC/LXD (2007)</li>
									<li>Docker (2013) <span class="fragment">
											<code><</code>----- Este cara aqui!</span>
									</li>
								</ul>
							</li>
						</ol>
					</div>

					<aside class="notes">
						Mas o que √© um container?
						Vamos extressar isso s√≥ um pouco para desmistific√°-lo
						N√£o √© uma virtual machine, ele apenas isola o processo.
						Como? Usando implementa√ß√µes do pr√≥prio kernel do linux tais como:
						[ler]
						LXC/LXD ou linux containers
						Docker no qual vamos focar
						Mas como assim √© s√≥ um isolamento e n√£o uma vm?
					</aside>
				</section>
				<section class="quote color--dark" id="containerized-demystification-base">
					<div class="grid-wrapper">
						<div class="header">
							<div class="logo"></div>
							<div class="section">Wrap b√°sico</div>
						</div>
						<figure class="code">
							<pre><code class="golang">
								func run() {
									cmd := exec.Command(os.Args[2], os.Args[3:]...)
									cmd.Stdin = os.Stdin
									cmd.Stdout = os.Stdout
									cmd.Stderr = os.Stderr
								
									must(cmd.Run())
								}
							</code></pre>
						</figure>
						<figure class="code fragment">
							<pre><code class="bash">
								[root@localhost /test]$ ./fancker run echo "Ol√° brasil!"
								Ol√° brasil!
								[root@localhost /test]$ ./fancker run bash
								[root@localhost /test]$ hostname
								localhost.localdomain
							</code></pre>
						</figure>
					</div>
					<aside class="notes">
						Bom, come√ßando pelo b√°sico, vejamos este simple wrap.
						Ele s√≥ est√° reexecutando o comando que eu passar para ele.
						Executando o comando `bash` por exemplo podemos ver que ele manteve o mesmo hostname do host. Claro, eu n√£o tenho
						isolamento.
					</aside>
				</section>
				<section class="quote color--dark" id="containerized-demystification-namespace">
					<div class="grid-wrapper">
						<div class="header">
							<div class="logo"></div>
							<div class="section">Namespace UTS</div>
						</div>
						<figure class="code">
							<pre><code class="golang">
								func run(){
									...
									cmd := exec.Command("/proc/self/exe", append([]string{"child"}, os.Args[2:]...)...)
									cmd.SysProcAttr = &syscall.SysProcAttr{
										Cloneflags:   syscall.CLONE_NEWUTS | syscall.CLONE_NEWNS,
										Unshareflags: syscall.CLONE_NEWNS,
									}
									...
								}
								
								func child() {
									must(os.Chdir("/"))
									must(syscall.Sethostname([]byte("container")))
									...
								}
							</code></pre>
						</figure>
						<figure class="code fragment">
							<pre><code class="bash">
								[root@localhost /test]$ ./fancker run bash
								[root@container /]$ hostname
								container
							</code></pre>
						</figure>
					</div>
					<aside class="notes">
						Agora preste aten√ß√£o nestas altera√ß√µes. Eu duplico o aquele c√≥digo criando esta func√£o child e fa√ßo a outra
						chamar a child. Na fun√ß√£o run eu crio um novo namespace com estas flagas e desassocio a child da principal.
						Na child eu renomeio o hostname para container.
					</aside>
				</section>
				<section class="quote color--dark" id="containerized-demystification-chroot-1">
					<div class="grid-wrapper">
						<div class="header">
							<div class="logo"></div>
							<div class="section">Proccess ID</div>
						</div>
						<figure class="code">
							<pre><code class="golang">
								func run(){
									fmt.Printf("Running %v, %v \n", os.Args[2:], os.Getpid())
									...
								}
								
								func child() {
									fmt.Printf("Running %v, %v \n", os.Args[2:], os.Getpid())
									...
								}
							</code></pre>
						</figure>
						<figure class="code fragment">
							<pre><code class="bash">
								[root@localhost /test]$ ./fancker run bash
								Running [bash], 28820
								Running [bash], 28823
								[root@container /]$ ps -T
								PID  SPID TTY          TIME CMD
								28859 28859 pts/0    00:00:00 fancker
								28859 28860 pts/0    00:00:00 fancker
								28859 28861 pts/0    00:00:00 fancker
								...
								28865 28865 pts/0    00:00:00 bash
								28878 28878 pts/0    00:00:00 ps
							</code></pre>
						</figure>
					</div>
					<aside class="notes">
						Agora vamos ver como est√° o isolamento dos processos simplesmente printando eles.
						Voc√™ pode ver esta longa lista incluindo o fancker com tr√™s processos, sua chamada no host e mais duas para cada
						fun√ß√£o. E ent√£o o bash e o comando ps.
					</aside>
				</section>
				<section class="quote color--dark" id="containerized-demystification-chroot-2">
					<div class="grid-wrapper">
						<div class="header">
							<div class="logo"></div>
							<div class="section">Proccess ID - CHRoot</div>
						</div>
						<figure class="code">
							<pre><code class="golang">
								func run(){
									cmd.SysProcAttr = &syscall.SysProcAttr{
										Cloneflags:   ...|syscall.CLOUD_NEWPID,
									}
									...
								}
								
								func child() {
									...
									must(syscall.Mount("proc", "proc", "proc", 0, ""))
									...
									must(syscall.Unmount("proc", 0))
								}
							</code></pre>
						</figure>
						<figure class="code">
							<pre><code class="bash">
								[root@localhost /test]$ ./fancker run bash
								Running [bash], 29040
								Running [bash], 1
								[root@container /]$ ps aux
								USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
								root         1  0.0  0.1 102888   960 pts/0    Sl   22:50   0:00 /proc/self/exe child bash
								root         4  0.0  0.5 115968  2616 pts/0    S    22:50   0:00 bash
								root        19  0.0  0.3 155360  1868 pts/0    R+   22:52   0:00 ps aux
							</code></pre>
						</figure>
					</div>
					<aside class="notes">
						Eu ent√£o mapeio no run para ele tamb√©m criar uma nova √°rvore de processos. No child eu monto o diret√≥rio do
						processo, para que o ps funciona devido o desvinculamento, ou isolamento.
						Agora temos apenas o exe child com PID igual a 1, que deu origem a tudo e o bash com o comando ps que eu dei.

						Isso √© s√≥ para exemplificar como √© simples e que isso n√£o √© do docker, mas sim do kernel do linux.
					</aside>
				</section>
			</section>

			<section class="demodocker color--dark" id="demodocker-radiant">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Demo Dockerüòà</div>
					</div>
					<div class="content">
						<div id="vm-app-layers">
							<center><img src="lib/myplanet/img/demo.jpg" height="500px"></center>
						</div>
					</div>
				</div>
			</section>

			<section class="subsection" data-background-image="lib/myplanet/img/single-container.jpg" data-background-size="cover">
				<div class="grid-wrapper">
					<aside class="notes">
						Por enquanto, tudo bem. Mas, embora as APIs de tempo de execu√ß√£o do cont√™iner sejam adequadas para o
						gerenciamento de cont√™ineres individuais, elas s√£o totalmente inadequadas quando se trata de gerenciar
						aplicativos que podem incluir centenas de cont√™ineres espalhados por v√°rios hosts. Os cont√™ineres precisam ser
						gerenciados e conectados ao mundo externo para tarefas como agendamento, balanceamento de carga e distribui√ß√£o, e
						√© nesse ponto que uma ferramenta de orquestra√ß√£o de cont√™ineres, como o Kubernetes, entra em a√ß√£o.
					</aside>
				</div>
			</section>

			<section class="subsection" data-background-image="lib/myplanet/img/containers-kubernetes.jpg" data-background-size="cover">
				<div class="grid-wrapper">
					<aside class="notes">
						Por enquanto, tudo bem. Mas, embora as APIs de tempo de execu√ß√£o do cont√™iner sejam adequadas para o
						gerenciamento de cont√™ineres individuais, elas s√£o totalmente inadequadas quando se trata de gerenciar
						aplicativos que podem incluir centenas de cont√™ineres espalhados por v√°rios hosts. Os cont√™ineres precisam ser
						gerenciados e conectados ao mundo externo para tarefas como agendamento, balanceamento de carga e distribui√ß√£o, e
						√© nesse ponto que uma ferramenta de orquestra√ß√£o de cont√™ineres, como o Kubernetes, entra em a√ß√£o.
					</aside>
				</div>
			</section>

			<section class="subsection" data-background-image="lib/myplanet/img/boats-wheel.jpg" data-background-size="cover">
				<div class="grid-wrapper">
					<div class="header">
						<h1 style="color: #000; text-shadow: all;">Kubernetes</h1>
					</div>
					<aside class="notes">
					</aside>
				</div>
			</section>

			<section class="quote color--midnight present" id="quote2--midnight" style="display: block;">
				<div class="grid-wrapper">
					<div class="logo"></div>
					<blockquote>
						<p>
							O que √© kubernetes?
						</p>
						<hr data-fragment-index="1">
						<cite data-fragment-index="1">Kubernetes √© um sistema para orquestra√ß√£o de aplica√ß√µes
							contenerizadas.</cite>
					</blockquote>
				</div>
				<aside class="notes">
					Voltamos ao primeiro slide, r√°... zeramos no easy, agora vamos no hard. Brincadeira, continuando...
				</aside>
			</section>

			<section class="quote color--midnight present" id="kube-why" style="display: block;">
				<div class="grid-wrapper">
					<div class="logo"></div>
					<blockquote>
						<p>
							Por que Kubernetes?
						</p>
						<hr>
						<br>
						<ol>
							<li class="fragment">Benef√≠cios no custo
								<ul>
									<li>Usa pouco recurso</li>
									<li>Open source</li>
									<li>Diversas funcionalidades que automatizam seu gerenciamento</li>
								</ul>

							</li>
							<li class="fragment">Adotado pela comunidade<ul>
									<li>Linux Foundation</li>
									<li>SIG</li>
								</ul>
							</li>
							<li class="fragment">Aproveite as ferramentas comuns</li>
							<li class="fragment">Entregas r√°pidas de mudan√ßas</li>
						</ol>
					</blockquote>
				</div>
				<aside class="notes">
					Por que kubernetes?
					Sabemos que containers s√£o menos caros que VMS j√° que fazemos um melhor proveito dos recursos ociosos.
					O kubernetes gerencia estes containers e como ele ser√° implantado, replicado, etc.
					Ent√£o temos benef√≠cios primeiro de custo j√° que usa pouco recurso e √© open source. Ele tamb√©m vem com um
					ecosistema de funcionalidades que ir√£o automatizar sua gest√£o de recursos salvando tempo e evitando perdas.
					Outra quest√£o √© sua comunidade que √© imensa e tem contribu√≠do ativamente. Ele tamb√©m conta com grandes comunidades
					como o Linux Foundation, o SIG e grandes empresas colaboradoras como google, ibm hat, etc.
					Ele √© como um bundle que reusa v√°riass ferramentas j√° conhecidas por√©m apresentando o ecosistema interligado e com
					as melhores pr√°ticas. Um exemplo s√£o seus componentes base como o etcd que √© tipo um nosql distribu√≠do com elei√ß√£o
					de lider.
					Sua ado√ß√£o permite estrat√©gias de entraga r√°pida, como blue/green nativo ou mesmo canary com uso de plugins.
				</aside>
			</section>

			<section class="quote color--midnight present" id="kube-why-2" style="display: block;">
				<div class="grid-wrapper">
					<div class="logo"></div>
					<blockquote>
						<p>
							Comparando Kubernetes
						</p>
						<hr>
						<br>
						<ol>
							<li class="fragment">K8s vs Docker Compose(swarm)</li>
							<li class="fragment">K8s vs ECS</li>
							<li class="fragment">K8s vs Mesos</li>
							<li class="fragment">K8s vs Nomad</li>
						</ol>
					</blockquote>
				</div>
				<aside class="notes">
					Bom, comparando ele com as mais conhecidas.
					Temos docker compose, oficionalizado a partir de um projeto chamado fig. Ele √© muito b√°sico e simples em rela√ß√£o
					ao kubernetes, bom para fazer testes locais mas n√£o para produ√ß√£o.
					ECS √© a solu√ß√£o da Amazon e al√©m de n√£o ser agn√≥stico te prendendo a amazon, ele tamb√©m √© muito simples fornecendo
					mais a quest√£o de escalonamento e gest√£o de n√≥s. Claro que voc√™ sempre pode combin√°-lo com os outros recursos da
					Amazon, mas isso s√≥ gera ainda mais depend√™ncias.
					Mesos √© bem semelhante ao kubernetes em alguns asp√©ctos por√©m ele permite rodar tanto containers como vms. As
					grandes features dele s√£o reservadas para vers√£o paga e sua comunidade n√£o √© t√£o ativa. Lembrando que comunidade
					ativa significa as vezes melhor suporte sem custos, mais integra√ß√µes com outros servi√ßos e evolu√ß√£o r√°pida.
					Nomad presa pelo simples e sobre fazer s√≥ uma parte do corpo de servi√ßos. Ele basicamente s√≥ faz a gest√£o e usar√°
					outros servi√ßos da hashcorp como consul para service discovery.
				</aside>
			</section>

			<section class="quote color--dark" id="kube-how-concepts-pods">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes Fundamental - Pods</div>
					</div>
					<div class="content">
						<div id="vm-app-layers" style="background-color: #eee;">
							<center><img src="lib/myplanet/img/pods-overview.svg" height="400px"></center>
						</div>
					</div>
				</div>
				<aside class="notes">
					O pod √© o menor componente do kubernetes, √© onde ir√° rodar o seu servi√ßo. Podemos ver aqui no exemplo um pod s√≥
					com um container, um outro com v√°rios e alguns volumes mapeados.
				</aside>
			</section>


			<section class="quote color--dark" id="kube-how-concepts-node">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes Fundamental - Node</div>
					</div>
					<div class="content">
						<div id="vm-app-layers" style="background-color: #eee;">
							<center><img src="lib/myplanet/img/node-overview.svg" height="500px"></center>
						</div>
					</div>
				</div>
				<aside class="notes">
					O node √© uma simples m√°quina virtual ou f√≠sica ligada a um cluster.
					Temos dois tipos, os master que faz a orquestra√ß√£o do cluster e os workers que ser√£o respons√°veis por rodar as
					aplica√ß√µes.
					O master tamb√©m roda pods e outros componentes semelhante ao workers, mas estes s√£o cores do kubernetes ou mesmo
					recursos marcados como plugins.
				</aside>
			</section>

			<section class="quote color--dark" id="kube-how-concepts-cluster">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes Fundamental - Cluster</div>
					</div>
					<div class="content">
						<div id="vm-app-layers">
							<center><img src="lib/myplanet/img/kubernetes-poc-architecture.png" height="500px"></center>
						</div>
					</div>
				</div>
				<aside class="notes">
					Temos ent√£o o cluster que √© o conjunto todo. Aqui por exemplo vemos um conjunto de workers e masters.

					Voc√™ pode ter tanto um cluster aguentando toda a carga como fazer um isolamento por ambiente, como por exemplo um
					para desenvolvimento, outro para tests e um para produ√ß√£o.
				</aside>
			</section>

			<section class="quote color--dark" id="kube-how-concepts-full">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes Fundamental - Tudo junto</div>
					</div>
					<div class="content">
						<div id="vm-app-layers" style="background-color: #eee;">
							<center><img src="lib/myplanet/img/kubernetes-full.png" width="750px"></center>
						</div>
					</div>
				</div>
				<aside class="notes">
					Agora aqui temos uma outra vis√£o, que seria a vis√£o interna ignorando quantidade de nodes.
					Aqui mostro outro componente importante no ecosistema que √© o service. Ele funciona como um balanceador dos pods,
					fazendo sele√ß√£o e o papel de service discovery.
				</aside>
			</section>


			<section class="code color--dark" id="code--pod">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes - Simples exemplo - Pod</div>
					</div>
					<figure class="code">
						<pre><code class="yaml">
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
  - name: nginx
    image: nginx:1.7.9
    ports:
    - containerPort: 80
							</code></pre>
						<!-- figcaption element is optional, can be placed above or below code  -->
						<figcaption class="path">pod.yaml</figcaption>
					</figure>
				</div>
				<aside class="notes">
					Aqui √© um simples pod, caso voc√™ queira implantar ele
				</aside>
			</section>

			<section class="code color--dark" id="code--deployment">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes - Simples Exemplo - Deployment</div>
					</div>
					<figure class="code">
						<pre><code class="yaml">
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  selector:
    matchLabels:
      app: nginx
  replicas: 2 # tells deployment to run 2 pods matching the template
  template: # create pods using pod definition in this template
    metadata:
      # unlike pod-nginx.yaml, the name is not included in the meta data as a unique name is
      # generated from the deployment name
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:1.7.9
        ports:
        - containerPort: 80
							</code></pre>
						<!-- figcaption element is optional, can be placed above or below code  -->
						<figcaption class="path">deployment.yaml</figcaption>
					</figure>
				</div>
				<aside class="notes">
					O pod pode ser tamb√©m criado pelo deployment que permite definis quantas replicas, tal como um auto scale.
					Usamos ele em vez de um pod descriptor, j√° que aqui temos mais controle e tamb√©m o poder de escalonamento.
				</aside>
			</section>

			<section class="code color--dark" id="code--service">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes - Simples Exemplo - Service</div>
					</div>
					<figure class="code">
						<pre><code class="yaml">
apiVersion: v1
kind: Service
metadata:
  name: nginx-service
spec:
  ports:
  - port: 8000 # the port that this service should serve on
    # the container on each pod to connect to, can be a name
    # (e.g. 'www') or a number (e.g. 80)
    targetPort: 80
    protocol: TCP
  # just like the selector in the deployment,
  # but this time it identifies the set of pods to load balance
  # traffic to.
  selector:
    app: nginx
							</code></pre>
						<!-- figcaption element is optional, can be placed above or below code  -->
						<figcaption class="path">service.yaml</figcaption>
					</figure>
				</div>
				<aside class="notes">
					Aqui temos a defini√ß√£o do service, que faz o load balance. Seguindo exemplo ele vai selecionar todos os pods com a
					tag app igual a nginx.
				</aside>
			</section>

			<section class="quote color--dark" id="kube-how-networking">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Kubernetes Networking</div>
					</div>
					<div class="content">
						<div id="vm-app-layers">
							<center><img src="lib/myplanet/img/k8-net-overlay.png" height="500px"></center>
						</div>
					</div>
				</div>
				<aside class="notes">
					Aqui temos para concluir nosssa jornada, antes de pararmos para demo, o desenho da rede.
					Voc√™ pode tanto usar a rede local dando ips da sua rede aos pods, como fazer seu isolamento com a rede overlay.
					O bom do isolamento √© que vc pode ter toda uma subrede sem consumir seus ips. Se voc√™ pensar que ser√£o muitos
					pods, eles ir√£o consumir muitos ips, ent√£o √© uma boa ter este isolamento.
					Assim a √∫nica forma de ingresso ser√° pelo controle do kubernetes funcionando como um proxy reverso de todo
					ecosistema.
				</aside>
			</section>

			<section class="demoend color--dark" id="demoend-radiant">
				<div class="grid-wrapper">
					<div class="header">
						<div class="logo"></div>
						<div class="section">Demo kubernetes üòà</div>
					</div>
					<div class="content">
						<div id="vm-app-layers">
							<center><img src="lib/myplanet/img/demo.jpg" height="500px"></center>
						</div>
					</div>
				</div>
			</section>

			<section class="end color--midnight" id="end-radiant">
				<div class="logo-wrapper">
					<div class="logo"><span class="visually-hidden">Fanatics</span></div>
				</div>
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			center: false,
			width: "100%",
			height: "100%",
			margin: 0,
			minScale: 1,
			maxScale: 1,
			history: true,
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{
					src: 'plugin/highlight/highlight.js',
					async: true,
					condition: function () {
						// Trim whitespace from code blocks, and prevent HTML escaping by default.
						// This must be done before the plugin is loaded.
						Array.prototype.forEach.call(
							document.querySelectorAll('pre code'),
							function (element) {
								if (!element.hasAttribute('data-notrim')) {
									element.setAttribute('data-trim', '');
								}
								if (!element.hasAttribute('data-escape')) {
									element.setAttribute('data-noescape', '');
								}
							}
						);
						return true;
					},
					callback: function () {
						hljs.initHighlightingOnLoad();
					}
				}
			]
		});
	</script>
</body>

</html>